
\documentclass[a4paper]{article}

\usepackage[russian]{babel}
\usepackage[utf8]{inputenc}
\usepackage{cmap}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{xspace}
\usepackage{graphicx}
\usepackage{sectsty}
\usepackage{fancyhdr}
\usepackage{longtable}
\usepackage{url}
\usepackage{appendix}
\usepackage{enumerate}

\newcommand{\EN}[1]{{#1}}
\newcommand{\CODE}[1]{{\ttfamily #1}}

\fancyhf{}
\fancyfoot[C]{\Large \thepage}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

%%Modifying captions for figures and tables:
\makeatletter
\long\def\@makecaption#1#2{%
\vspace{\abovecaptionskip}%
\sbox{\@tempboxa}{\Large #1.~#2}
\ifdim \wd\@tempboxa >\hsize
{\Large #1.~#2}\par
\else
\global\@minipagefalse
\hbox to \hsize {\hfill {\Large #1.~#2}\hfill}%
\fi
\vspace{\belowcaptionskip}}

\renewcommand{\baselinestretch}{1.2}
%%\sectionfont{\LARGE}
\sectionfont{\Large}
\subsectionfont{\Large}
\subsubsectionfont{\Large}
\setlength{\belowcaptionskip}{6pt}
\makeatletter \renewcommand{\@biblabel}[1]{#1.\hfill}

\makeatletter 
\def\redeflsection{\def\l@section{\@dottedtocline{1}{1.5em}{7.8em}}} 
\renewcommand\appendix{\par 
\setcounter{section}{0}% 
\setcounter{subsection}{0}% 
\def\@chapapp{\appendixname}% 
\addtocontents{toc}{\protect\redeflsection} 
\def\thesection{\appendixname\hspace{0.2cm}\@Asbuk\c@section}} 
\makeatother 

\textwidth = 17cm
\oddsidemargin= 0 pt
\topmargin = -1cm
\headheight = 0cm
\headsep = 0cm
\textheight = 26.5cm

\begin{document}
\huge
\newpage

Здравствуйте!

Тема моей ВКР - “Разработка системы генерации статистических отчетов для IPTV провайдера”

Научный руководитель - Малахов Роман Юрьевич

\newpage
IPTV-провайдер - это организация, предоставляющая доступ к media-контенту абонентам в сетях передачи данных по протоколу IP.

Существует три основных бизнес-процесса, выполняемые провайдером:

Во-первых это Заключение договоров с правообладателями контента, такими как телевизионные холдинги, или кинокомпании. Суть этих договоров, заключается в том, что правообладатель передает права на предоставление своего контента абонентам провайдера на определенных условиях.

Второй БП -  Предоставление абонентам услуги IPTV, то есть непосредственно доступа к телевизионным каналам в режиме реального времени (в терминах провайдера это называется “Live”)

Третий - Предоставление доступа к статичному медиа-контенту, такому как фильмы или клипы, по запросу абонента (в терминах провайдера это называется “VOD” (Video-on-Demand)).
(55с)

\newpage

При принятии важных управленческих решений или для изменения маркетологической политики крупным IPTV-провайдерам необходимо анализировать и учитывать разного рода статистические показатели, отражающие состояние выполняемых бизнес-процессов в разные периоды времени.

Для удобного доступа к этим показателям необходима система, которая бы аккумулировала необходимые данные и генерировала отчеты в соответствии с пожеланиями пользователя.

В ходе анализа требований к системе были выделены следующие крупные задачи:

--- Импорт данных

--- Разработка удобного интерфейса для поиска, просмотра и редактирования данных.

---  Расчет отчислений по договорам

--- Генерация отчетов по LIVE и VOD

---  Разграничение прав доступа к различным частям системы

\newpage

При проектировании было принято решение реализовать систему в виде веб-приложения, 
что значительно упростило задачи масштабирования, обновления версий, и разграничения прав доступа.

В качестве основной среды разработки был выбран фреймворк Yii (PHP),\\
а в качестве хранилища данных --- СУБД Microsoft SQL Server.\\

\newpage

При анализе части предметной области, связанной с Live, то есть телевещанием, была спроектирована модель предметной области, изображенная на слайде в виде
ER-диаграммы в нотации Баркера

Особую роль здесь играют множества сущностей:\\

ДоговорТВ --- договора с правообладателями (основными их характеристиками является период их действия и номер), договор заключается  
для множества регионов, и состоит из пакетов телеканалов.

Каждый пакет телеканалов содержит в себе градации.

Градация содержит данные для проверки применимости при расчете отчислений а так же значения, определяющие размер отчисления по данной градации.

Так же на схеме представлена сущность ОтчисленияПоГрадации - отчисления правообладателям
 в определенный месяц года и разбивка по конкретным телеканалам.

\newpage

Кроме того для построения некоторых показателей используются данные 

ВыручкаТВ --- размер выручки по пакету телеканалов в регионе в определенную дату, 

ПодписчикиПоПакетам --- количество подписчиков в регионе в определенную дату и 

ДоступностьКанала
 --- множество сущностей для хранения информации о том, какие каналы в каких пакетах были доступны.

На основе двух последних вводится избыточная виртуальная таблица --- ПодписчикиПоКаналам, 
в которой хранится информация об усредненном количестве подписчиков определенного телеканала.

Большая часть данных для описанных выше сущностей импортируется из различных источников.
Исключением являются отчисления, которые расчитываются на основе данных договоров по запросу пользователя.

\newpage

При рассмотрении модели предметной области для video-on-demand следует обратить внимание на следующие сущности:

--- Ассет - описание отдельного клипа, который может заказать абонент.

--- ДоговорVOD - содержит описание договоров по VOD, и соответственно условий, по которым происходит 
расчет отчислений правообладателям --- ОтчисленияVod.

Отчисления так же, как и в случае с Live, считаются на основе условий контракта, расположенных в УсловияДоговораVod.

\newpage

Большая часть статистических данных для отчета по VOD берется из сущности

--- ЗаказVOD - отдельные заказы ассетов пользователями ( основные характеристики - дата, регион, ссылка на ассет, выручка )

\newpage
На этом слайде изображен скриншот формы параметров отчета

Основные поля здесь:

--- Период отчета

--- Разбивка периода (для каждой части выбранного периода будут вычислены значения показателей)

\newpage
--- Структура регионов, для которой будет строиться отчет: здесь можно выбрать вид дерева регионов, и сами вершины.

Например, если выбрать пункт “Регионы, Филиалы, города”, каждый показатель будет посчитан отдельно для каждого уровня и выведен в виде дерева.


\newpage
--- Также можно выбрать множество показателей, которые необходимо вычислить при построении отчета

--- Кроме того этой форме можно выбрать валюту, в которой нужно выводить значения показателей, связанных с денежными суммами.
(5мин)

\newpage
Рассмотрим подробно, что из себя представляют отчеты:

в общем случае это древообразная структура, в вершинах которой хранятся значения показателей
на разных уровнях детализации.

Отчет может быть построен с детализацией 
по вершинам дерева регионов, кроме того каждый конкретный показатель может быть детализирован
в соответствии с требованиями пользователя.

\newpage
На рисунке изображен сгенерированный отчет по Live, открытый в приложении OpenOffice.

Детализация полученного отчета:

Дерево регионов -> Пакеты -> Телеканалы

Значения показателей располагаются в столбцах с E по I.

В столбце J значение EndOfPercent для показателя.

\newpage

На этом слайде можно увидеть упрощенную диаграмму классов, демонстрирующую структуру отчета в общем виде.

Базовый класс StatReportNode --- абстрактная вершина дерева отчета,
и две конкретные реализации 

StatReportRegionNode для вершин-регионов и

StatReportIndicator, в котором хранятся значения показателей.

\newpage

Здесь изображена диаграмма последовательности процесса “Построение отчета”.

--- Пользователь, находясь на странице с формой отчета, нажимает “Сгенерировать отчет”.

--- Так как процесс построения занимает существенное время, и результат не может быть получен в рамках одного HTTP-запроса, 
отчет генерируется в отдельном фоновом процессе, а пользователя перенаправляет на страницу ожидания отчета, которая раз в 10 секунд с помощью ajax-запросов, устанавливает, готов ли отчет.
и так до момента его полной генерации.

--- объект класса StatReportBuilder получает список объектов-вычислителей, каждый из которых добавляет в отчет соответсвующий ему показатель

--- Затем полученный объект-отчет передается в метод renderToFile класса StatReportExcelWriter, который сохраняет его в файле формата Excel, после чего пользователь может его скачать

\newpage
Стоит обратить особое внимение на загрузку классов-вычислителей показателей. По сути она реализована в виде системы плагинов.

1. CalculatorManager перед началом работы вызывает статический метод buildDefaultCalculators у всех файлов-классов, располагающихся в определенной директории.
В этом методе создаются и возвращаются объекты-вычислители конкретного класса.

2. Так как некоторые показатели считаются на основе других 
(например прибыль вычисляется на основе выручки и отчислений)
, CalculatorManager вызывает у полученных ранее объектов метод getDependencies(), возвращающий список зависимостей.

3. На основе этих списков строится орграф зависимостей и производится его топологическая сортировка.

4. Таким образом возвращается список объектов-вычислителей, такой что, если вызывать их в указанном порядке, то в момент вычисления показателя “с зависимостями”, они уже будут удовлетворены.

\newpage

В результате для того, чтобы добавить новый вид показателей, разработчику необходимо:

реализовать один из этих абстрактных классов-вычислителей:


После чего нужно поместить реализацию в директорию с другими классами-вычислителями
и определить статический метод buildDefaultCalculators, возвращающий конкретные объекты.

При выборе базового класса следует придерживаться следующих рекомендаций:
--- В случае если значение показателя для региона-родителя всегда равно сумме значений детей, то следует выбрать SummedIndicatorCalculator и реализовать метод, вычисляющий значение показателя в листьях дерева

--- В случае, если значение показателя не зависит от положения в дереве регионов, необходимо реализовать TraverseRegionIndicatorCalculator.

--- Во всех остальных случаях следует использовать в качестве базового класса IndicatorCalculator.

\newpage

Таким образом в ходе выполнения ВКР были разработаны:

Структура базы данных 

Интерфейсы для поиска и редактирования данных в системе (для более чем 20 типов сущностей)

Расчет отчислений по категории LIVE

Генерация отчетов по LIVE и VOD

Система установлена и введена в эксплуатацию

\newpage
В ходе дальнейших этапов разработки планируется:

Реализовать графическую интерпретацию отчетов

Сделать возможным просматривать отчет в течение времени его построения

Оптимизация процесса генерации отчетов за счет уменьшения количества избыточных данных



\end{document}
